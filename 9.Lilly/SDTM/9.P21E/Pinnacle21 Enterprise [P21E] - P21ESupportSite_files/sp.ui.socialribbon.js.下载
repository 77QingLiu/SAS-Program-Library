function ULS1cy(){var o=new Object;o.ULSTeamName="SharePoint Portal Server";o.ULSFileName="SP.UI.SocialRibbon.js";return o;}
Type.registerNamespace('SP.UI.SocialData');SP.UI.SocialData.TermChangeType=function(){};SP.UI.SocialData.TermChangeType.prototype={add:0,change:1,remove:2,isPrivateChange:3}
SP.UI.SocialData.TermChangeType.registerEnum('SP.UI.SocialData.TermChangeType',false);SP.UI.SocialData.TRCMode=function(){};SP.UI.SocialData.TRCMode.prototype={noteBoard:0,tag:1}
SP.UI.SocialData.TRCMode.registerEnum('SP.UI.SocialData.TRCMode',false);SP.UI.SocialData._SocialItemType=function(){};SP.UI.SocialData._SocialItemType.prototype={$1:0,$2:1,$3:2}
SP.UI.SocialData._SocialItemType.registerEnum('SP.UI.SocialData._SocialItemType',false);SP.UI.SocialData._VerificationStatus=function(){};SP.UI.SocialData._VerificationStatus.prototype={$1:0,$2:1,$3:2}
SP.UI.SocialData._VerificationStatus.registerEnum('SP.UI.SocialData._VerificationStatus',false);SP.UI.SocialData.TermChange=function(type,id,term,isPrivate){ULS1cy:;this.ChangeType=type;this.TermID=id;this.Term=term;this.IsPrivate=isPrivate;}
SP.UI.SocialData.TermChange.prototype={ChangeType:0,TermID:null,Term:null,IsPrivate:false}
SP.UI.SocialData._SocialTagItem=function(e,resTagProfLink,inWindow){ULS1cy:;SP.UI.SocialData._SocialTagItem.initializeBase(this,[e]);this.$2_2=resTagProfLink;this.$2_3=inWindow;}
SP.UI.SocialData._SocialTagItem.prototype={$2_0:null,get_$2_1:function(){ULS1cy:;return this.$2_0;},set_$2_1:function($p0){this.$2_0=$p0;return $p0;},$2_2:null,$2_3:null,add_$2_4:function($p0){this.get_events().addHandler('click',$p0);},remove_$2_4:function($p0){this.get_events().removeHandler('click',$p0);},$2_5:null,get_$2_6:function(){ULS1cy:;return this.get_element();},$2_7:function($p0){SP.UI.SocialData._SocialTagItem.callBaseMethod(this,'initialize');if(null===$p0){return;}var $0=$p0.Term;if(SP.ScriptUtility.isNullOrEmptyString($0)){return;}if($0.length>20){$0=$0.substring(0,20)+'...';}$0=SP.Utilities.HttpUtility.htmlEncode($0);var $1=document.createElement('a');$1.href='#';$1.innerHTML=$0;this.$2_D($1);this.$2_C=$1;this.$2_9=$p0.Path;this.$2_A=$p0.TermID;this.$2_B=$p0.Term;this.get_element().appendChild($1);},$2_8:function(){ULS1cy:;if(SP.ScriptUtility.isNullOrUndefined(this.$2_C)){return;}this.$2_C.innerHTML='';},$2_9:null,$2_A:null,$2_B:null,$2_C:null,dispose:function(){ULS1cy:;try{if(null!==this.$2_C&&null!==this.$2_5){Sys.UI.DomEvent.removeHandler(this.$2_C,'click',this.$2_5);}this.$2_5=null;}finally{SP.UI.SocialData._SocialTagItem.callBaseMethod(this,'dispose');}},$2_D:function($p0){if(null===this.$2_5){this.$2_5=Function.createDelegate(this,this.$2_E);}Sys.UI.DomEvent.addHandler($p0,'click',this.$2_5);},$2_E:function($p0){$p0.preventDefault();$p0.stopPropagation();var $0=SP.UI.Menu.create(this.$2_A+'socialtag');if(this.get_$2_1()&&!this.get_$2_1().$2_15(this.$2_A)){$0.addMenuItem(this.get_$2_1().get_$2_5(),'javascript:'+this.get_$2_1().objectName+'.addTag(\''+this.$2_A+'\')',null,null,10,null,null);}var $1=this.get_$2_1().get_$2_4();if(!SP.ScriptUtility.isNullOrEmptyString($1)){var $2=new SP.Utilities.UrlBuilder($1);$2.addKeyValueQueryString('termid',this.$2_A);var $3=String.format(this.$2_2,this.$2_9);if($3.length>50){$3=$3.substring(0,50)+'...';}var $4;if(this.$2_3==='1'){$4=String.format('javascript:window.open(\'{0}\');',$2.get_url());}else{$4=String.format('javascript:parent.location.href=\'{0}\';',$2.get_url());}$0.addMenuItem($3,$4,null,null,20,null,null);}else{$0.addMenuItem(this.$2_9,null,null,null,20,null,null);}$0.show($p0.target,false,false,0);},$2_F:function($p0){if(SP.ScriptUtility.isNullOrUndefined($p0)){return;}this.$2_9=$p0.Path;this.$2_A=$p0.TermID;this.$2_B=$p0.Term;if(SP.ScriptUtility.isNullOrUndefined(this.$2_C)||SP.ScriptUtility.isNullOrEmptyString(this.$2_C.innerHTML)){var $0=$p0.Term;if(!SP.ScriptUtility.isNullOrEmptyString($0)&&$0.length>20){$0=$0.substring(0,20)+'...';}$0=SP.Utilities.HttpUtility.htmlEncode($0);var $1=document.createElement('a');$1.href='#';$1.innerHTML=$0;$1.title=$p0.TermFullPathName;this.$2_D($1);this.$2_C=$1;this.get_element().appendChild($1);}}}
SP.UI.SocialData.SocialTagsControl=function(e){ULS1cy:;this.unvalidateD_GUID=Microsoft.SharePoint.Taxonomy.Term.unvalidatedGuid;this.$2_C=new Array(0);this.$2_D=new Array(0);SP.UI.SocialData.SocialTagsControl.initializeBase(this,[e]);Sys.Net.WebRequestManager.add_invokingRequest(Function.createDelegate(this,this.$2_0));}
SP.UI.SocialData.SocialTagsControl.prototype={$2_0:function($p0,$p1){var $0=$get('__REQUESTDIGEST');$p1.get_webRequest().get_headers()['X-RequestDigest']=$0.value;},neW_KEYWORD_GUID:'22222222-2222-2222-2222-222222222222',get_suggestedTagsAreaID:function(){ULS1cy:;return this.SuggestedTagsAreaID;},get_pickerContainerID:function(){ULS1cy:;return this.PickerContainerID;},get_saveButtonID:function(){ULS1cy:;return this.SaveButtonID;},get_recommendationAreaID:function(){ULS1cy:;return this.RecommendationAreaID;},get_recommendationNoDataAreaID:function(){ULS1cy:;return this.RecommendationNoDataAreaID;},get_url:function(){ULS1cy:;return this.Url;},get_title:function(){ULS1cy:;return this.Title;},get_pageSize:function(){ULS1cy:;return this.PageSize;},get_privateChkBoxID:function(){ULS1cy:;return this.PrivateChkBoxID;},get_$2_4:function(){ULS1cy:;return this.TagResultPageUrl;},get_$2_5:function(){ULS1cy:;return this.ResAddTagString;},get_$2_6:function(){ULS1cy:;return this.ResFailureNotifyText;},get_$2_7:function(){ULS1cy:;return this.ResAddTagNotifyText;},get_$2_8:function(){ULS1cy:;return this.ResGetTagNotifyText;},get_$2_9:function(){ULS1cy:;return this.ResErrorTagNotifyText;},get_$2_A:function(){ULS1cy:;return this.ResTagProfLink;},get_$2_B:function(){ULS1cy:;return this.InWindow;},$2_E:true,webTaggingControl:null,saveButton:null,suggestedArea:null,recommendedArea:null,recommendedNoDataArea:null,privateChkBox:null,addalltermvalidHandler:null,initialData:null,objectName:'',get_myTerms:function(){ULS1cy:;if(!this.$2_F){this.$2_F=new Array(0);}return this.$2_F;},set_myTerms:function(value){ULS1cy:;this.$2_F=value;return value;},$2_F:null,$2_10:null,$2_11:null,get_$2_12:function(){ULS1cy:;if(SP.ScriptUtility.isNullOrUndefined(this.$2_13)){this.$2_13=$get(this.get_pickerContainerID()+'editableRegion');}return this.$2_13;},$2_13:null,$2_14:function($p0){var $0=true;if(SP.ScriptUtility.isNullOrUndefined($p0)){return $0;}else if(this.get_myTerms()){for(var $1=0;$1<this.get_myTerms().length;$1++){var $2=this.get_myTerms()[$1];if($2.get_guid()===$p0.get_guid()){if($2.get_text()===$p0.get_text()){$0=false;}else{$0=true;}break;}}}return $0;},$2_15:function($p0){var $0=false;if(SP.ScriptUtility.isNullOrUndefined($p0)){$0=false;}else if(this.get_myTerms()){for(var $1=0;$1<this.get_myTerms().length;$1++){var $2=this.get_myTerms()[$1];if($2.get_guid()===$p0){$0=true;break;}}}return $0;},initialize:function(){ULS1cy:;SP.UI.SocialData.SocialTagsControl.callBaseMethod(this,'initialize');this.saveButton=$get(this.get_saveButtonID());this.saveButton.disabled=true;this.$2_10=Function.createDelegate(this,this.$2_1A);Sys.UI.DomEvent.addHandler(this.saveButton,'click',this.$2_10);this.suggestedArea=$get(this.get_suggestedTagsAreaID());this.recommendedArea=$get(this.get_recommendationAreaID());this.recommendedNoDataArea=$get(this.get_recommendationNoDataAreaID());this.privateChkBox=$get(this.get_privateChkBoxID());this.$2_11=Function.createDelegate(this,this.$2_1C);Sys.UI.DomEvent.addHandler(this.privateChkBox,'click',this.$2_11);if(SP.ScriptUtility.isNullOrUndefined(this.initialData)){this.$2_1D();}else{this.$2_23(this.initialData);}this.$2_17();if(!SP.ScriptUtility.isNullOrUndefined(this.webTaggingControl)){this.webTaggingControl.setMinimumHeight(65);}},dispose:function(){ULS1cy:;try{Sys.Net.WebRequestManager.remove_invokingRequest(Function.createDelegate(this,this.$2_0));if(null!==this.saveButton&&null!==this.$2_10){Sys.UI.DomEvent.removeHandler(this.saveButton,'click',this.$2_10);this.$2_10=null;}if(null!==this.privateChkBox&&null!==this.$2_11){Sys.UI.DomEvent.removeHandler(this.privateChkBox,'click',this.$2_11);this.$2_11=null;}}finally{SP.UI.SocialData.SocialTagsControl.callBaseMethod(this,'dispose');}},SetFocus:function(){ULS1cy:;if(!SP.ScriptUtility.isNullOrUndefined(this.webTaggingControl)){if(!SP.ScriptUtility.isNullOrUndefined(this.get_$2_12())){RTE.Cursor.get_range().moveToEndOfNode(this.get_$2_12());RTE.Cursor.update();}}},ensureEvent:function(){ULS1cy:;if(this.$2_E||SP.ScriptUtility.isNullOrUndefined(this.get_$2_12())){return;}Sys.UI.DomElement.addCssClass(this.get_$2_12(),'ms-taxonomy-writeableregion');this.$2_E=true;},discardEvent:function(){ULS1cy:;if(!this.$2_E||SP.ScriptUtility.isNullOrUndefined(this.get_$2_12())){return;}Sys.UI.DomElement.removeCssClass(this.get_$2_12(),'ms-taxonomy-writeableregion');this.$2_E=false;},$2_16:function(){ULS1cy:;this.$2_17();if(SP.ScriptUtility.isNullOrUndefined(this.addalltermvalidHandler)){this.addalltermvalidHandler=Function.createDelegate(this,this.$2_18);}this.saveButton.disabled=false;},$2_17:function(){ULS1cy:;var $0=$get(this.get_pickerContainerID());if(!$0){return;}if(SP.ScriptUtility.isNullOrUndefined(this.webTaggingControl)){this.webTaggingControl=new Microsoft.SharePoint.Taxonomy.ControlObject($0);}},$2_18:function($p0,$p1){this.webTaggingControl.removeAllTermValidHandler(this.addalltermvalidHandler);var $0=this.webTaggingControl.getRawText();var $1=Microsoft.SharePoint.Taxonomy.Term.getTerms($0);var $2=this.$2_2A($1);this.$2_29($2);if(null===$2||0===$2.length){this.saveButton.disabled=false;return;}if(!this.webTaggingControl.get_allTermsValid()){this.saveButton.disabled=false;this.showNotify(String.format(this.get_$2_9(),this.webTaggingControl.getFirstInvalidTerm()));return;}this.$2_20($2);},$2_19:function(){ULS1cy:;if(null===this.privateChkBox){return false;}return this.privateChkBox.checked;},$2_1A:function($p0){$p0.preventDefault();$p0.stopPropagation();if(this.$2_1B()){this.webTaggingControl.addAllTermValidHandler(this.addalltermvalidHandler);this.webTaggingControl.validateAll(true);this.saveButton.disabled=true;}else{var $0=new Array(0);var $1=this.$2_2A($0);this.$2_29($1);if(null===$1||0===$1.length){this.saveButton.disabled=false;return;}if(!this.webTaggingControl.get_allTermsValid()){this.saveButton.disabled=false;this.showNotify(String.format(this.get_$2_9(),this.webTaggingControl.getFirstInvalidTerm()));return;}this.saveButton.disabled=true;this.$2_20($1);}},$2_1B:function(){ULS1cy:;var $0=this.webTaggingControl.getRawText();var $1='';if(!SP.ScriptUtility.isNullOrUndefined(this.get_$2_12().innerText)){$1=this.get_$2_12().innerText;}else{$1=this.get_$2_12().textContent;}if(SP.ScriptUtility.isNullOrEmptyString($0)&&SP.ScriptUtility.isNullOrEmptyString($1)){return false;}else{return true;}},$2_1C:function($p0){var $0=this.webTaggingControl.getRawText();if(SP.ScriptUtility.isNullOrEmptyString($0)){return;}var $1=Microsoft.SharePoint.Taxonomy.Term.getTerms($0);if(!$1.length){return;}var $2=this.$2_19();var $3=new Array(0);for(var $4=0;$4<$1.length;$4++){var $5=$1[$4];if($5.get_guid()!==this.unvalidateD_GUID&&$5.get_guid()!==this.neW_KEYWORD_GUID){if(this.$2_15($5.get_guid())){$3[$3.length]=new SP.UI.SocialData.TermChange(3,$5.get_guid(),$5.get_text(),$2);}else{$3[$3.length]=new SP.UI.SocialData.TermChange(0,$5.get_guid(),$5.get_text(),$2);}}}this.$2_20($3);},nid:null,$2_1D:function(){ULS1cy:;var $0={};$0['targetPage']=this.get_url();$0['maximumItemsToReturn']=this.get_pageSize().toString();this.showNotify(this.get_$2_8());this._RaiseCallback(SP.UI.SocialData.SocialTagsControl.$2_3,false,$0,null);},$2_1E:null,$2_1F:'',$2_20:function($p0){this.$2_1E=$p0;if(SP.ScriptUtility.isNullOrEmptyString(this.$2_1F)){var $0=window.PageUrlNormalizer;$0=$0.GetInstance();var $1=Function.createDelegate(this,this.$2_21);$0.GetUrl(this.get_url(),$1);}else{this.$2_22(this.$2_1E);}},$2_21:function($p0){this.$2_1F=$p0;this.$2_22(this.$2_1E);},$2_22:function($p0){if(!$p0.length){return;}if(null!==this.privateChkBox){this.privateChkBox.disabled=true;}var $0={};$0['targetPage']=this.$2_1F;$0['title']=this.get_title();$0['changes']=$p0;$0['maximumItemsToReturn']=this.get_pageSize().toString();this.showNotify(this.get_$2_8());this._RaiseCallback(SP.UI.SocialData.SocialTagsControl.$2_2,false,$0,$p0);},showNotify:function(value){ULS1cy:;if(!SP.ScriptUtility.isNullOrEmptyString(this.nid)){this.hideNotify();}this.nid=SP.UI.Notify.addNotification(value,true);},hideNotify:function(){ULS1cy:;if(!SP.ScriptUtility.isNullOrEmptyString(this.nid)){SP.UI.Notify.removeNotification(this.nid);this.nid=null;}},_RaiseCallback:function(methodName,fUseGet,parameters,userContext){ULS1cy:;this._ClearError();var $0=SP.Utilities.UrlBuilder.urlCombine(SP.PageContextInfo.get_webServerRelativeUrl(),SP.UI.SocialData.SocialTagsControl.$2_1);Sys.Net.WebServiceProxy.invoke(SP.Utilities.HttpUtility.urlPathEncode($0),methodName,fUseGet,parameters,Function.createDelegate(this,this._OnSucceededCallback),Function.createDelegate(this,this._OnFailedCallback),userContext);this.get_element().style.cursor='wait';},_ClearError:function(){ULS1cy:;window.removeAllStatus('true');},_RenderError:function(){ULS1cy:;if(SP.ScriptUtility.isNullOrEmptyString(this.get_$2_6())){return;}var $0='<span class=\'ms-errorinl\'>';$0+=this.get_$2_6();$0+='</span>';window.addStatus(null,$0,'true');},_OnFailedCallback:function(result,userContext,methodName){ULS1cy:;this.hideNotify();this.get_element().style.cursor='default';this.saveButton.disabled=false;this._RenderError();},_OnSucceededCallback:function(result,userContext,methodName){ULS1cy:;this.$2_23(result);this.hideNotify();if(methodName===SP.UI.SocialData.SocialTagsControl.$2_2){this.saveButton.disabled=false;}this.get_element().style.cursor='default';this._ClearError();},$2_23:function($p0){if(null===$p0){return;}var $0=$p0;this.$2_C=$0.MyTags;this.$2_D=$0.OtherTags;this.$2_25(this.$2_C);this.$2_28(this.$2_D);this.$2_24(this.$2_C);},$2_24:function($p0){var $0=true;if(!$p0||0===$p0.length){$0=false;}else{for(var $1=0;$1<$p0.length;$1++){var $2=$p0[$1];if(!$2.IsPrivate){$0=false;break;}}}this.privateChkBox.checked=$0;this.privateChkBox.disabled=false;},$2_25:function($p0){this.$2_16();if(null===$p0||0===$p0.length){return;}this.set_myTerms(new Array(0));for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];var $2=new Microsoft.SharePoint.Taxonomy.Term($1.Term+'|'+$1.TermID);$2.set_path($1.Path);this.$2_26($2);}this.webTaggingControl.setRawText('');for(var $3=0;$3<this.get_myTerms().length;$3++){this.webTaggingControl.addTerm(this.get_myTerms()[$3].get_guid(),this.get_myTerms()[$3].get_text());}},$2_26:function($p0){if(null===this.get_myTerms()){this.set_myTerms(new Array(0));}this.get_myTerms()[this.get_myTerms().length]=$p0;},addTag:function(id){ULS1cy:;var $0=null;for(var $2=0;$2<this.$2_D.length;$2++){var $3=this.$2_D[$2];if(id.toString()!==$3.TermID){continue;}$0=$3;break;}if(!this.$2_C){this.$2_C=new Array(0);}this.$2_C[this.$2_C.length]=$0;var $1=new Array(0);for(var $4=0;$4<this.$2_C.length;$4++){var $5=this.$2_C[$4];var $6=new Microsoft.SharePoint.Taxonomy.Term($5.Term+'|'+$5.TermID);$6.set_path($5.Path);$1[$1.length]=$6;}this.webTaggingControl.setRawText('');for(var $7=0;$7<$1.length;$7++){this.webTaggingControl.addTerm($1[$7].get_guid(),$1[$7].get_text());}this.saveButton.click();},$2_27:null,$2_28:function($p0){if(null===$p0||0===$p0.length){this.suggestedArea.style.display='none';this.recommendedArea.style.display='none';this.recommendedNoDataArea.style.display='block';return;}this.recommendedNoDataArea.style.display='none';this.recommendedArea.style.display='block';this.suggestedArea.style.display='block';if(SP.ScriptUtility.isNullOrUndefined(this.$2_27)){this.$2_27=new Array(0);var $0=document.createElement('table');$0.style.width='100%';$0.className='ms-socialDataFrameContents';var $1=document.createElement('tbody');$1.style.width='100%';$0.appendChild($1);var $2=null;for(var $3=0;$3<this.get_pageSize();$3++){var $4=$3%3;if(!$4){$2=document.createElement('tr');$2.style.width='100%';$1.appendChild($2);}var $5=document.createElement('td');$5.style.width='33%';$2.appendChild($5);var $6=new SP.UI.SocialData._SocialTagItem($5,this.get_$2_A(),this.get_$2_B());$6.set_$2_1(this);this.$2_27[this.$2_27.length]=$6;}this.suggestedArea.appendChild($0);}for(var $7=0;$7<this.$2_27.length;$7++){this.$2_27[$7].$2_8();}for(var $8=0;$8<$p0.length;$8++){if(!SP.ScriptUtility.isNullOrUndefined(this.$2_27[$8])){this.$2_27[$8].$2_F($p0[$8]);}}},$2_29:function($p0){if(!$p0){return;}for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];switch($1.ChangeType){case 0:this.$2_26(new Microsoft.SharePoint.Taxonomy.Term($1.Term+'|'+$1.TermID));break;case 1:for(var $2=0;$2<this.get_myTerms().length;$2++){var $3=this.get_myTerms()[$2];if($3.get_guid()===$1.TermID){$3.set_text($1.Term);}}break;case 2:var $4=this.get_myTerms().length;for(var $5=$4-1;$5>=0;$5--){var $6=this.get_myTerms()[$5];if($6.get_guid()===$1.TermID){Array.removeAt(this.get_myTerms(),$5);}}break;default:break;}}},$2_2A:function($p0){var $0=new Array(0);var $1=null;if(!SP.ScriptUtility.isNullOrUndefined($p0)&&$p0.length>0){$1=Array.clone($p0);}var $2=this.$2_19();for(var $3=0;$3<this.get_myTerms().length;$3++){var $4=this.get_myTerms()[$3];var $5=false;if(!SP.ScriptUtility.isNullOrUndefined($p0)&&$p0.length>0){for(var $6=0;$6<$p0.length;$6++){var $7=$p0[$6];if(!$7.get_isValid()){continue;}if($4.get_text()===$7.get_text()&&$4.get_guid()===$7.get_guid()){$1[$6]=null;$5=true;continue;}if($4.get_guid()===$7.get_guid()&&$4.get_text()!==$7.get_text()){$1[$6]=null;$5=true;$0[$0.length]=new SP.UI.SocialData.TermChange(1,$7.get_guid(),$7.get_text(),$2);}}}if(!$5){$0[$0.length]=new SP.UI.SocialData.TermChange(2,$4.get_guid(),$4.get_text(),$2);}}if(!SP.ScriptUtility.isNullOrUndefined($1)){for(var $8=0;$8<$1.length;$8++){var $9=$1[$8];if(null===$9){continue;}$0[$0.length]=new SP.UI.SocialData.TermChange(0,$9.get_guid(),$9.get_text(),$2);}}return $0;}}
SP.UI.SocialData.TRCCommandNames=function(){}
SP.UI.SocialData.TRCRibbonComponent=function(){ULS1cy:;this.$1_A=0;SP.UI.SocialData.TRCRibbonComponent.initializeBase(this);}
SP.UI.SocialData.TRCRibbonComponent.get_Instance=function(){ULS1cy:;if(!SP.UI.SocialData.TRCRibbonComponent.$1_C){SP.UI.SocialData.TRCRibbonComponent.$1_C=new SP.UI.SocialData.TRCRibbonComponent();}return SP.UI.SocialData.TRCRibbonComponent.$1_C;}
SP.UI.SocialData.TRCRibbonComponent.RegisterWithPageManager=function(){ULS1cy:;SP.Ribbon.PageManager.get_instance().addPageComponent(SP.UI.SocialData.TRCRibbonComponent.get_Instance());}
SP.UI.SocialData.TRCRibbonComponent.unregisterWithPageManager=function(){ULS1cy:;if(SP.UI.SocialData.TRCRibbonComponent.$1_C){SP.Ribbon.PageManager.get_instance().removePageComponent(SP.UI.SocialData.TRCRibbonComponent.get_Instance());}}
SP.UI.SocialData.TRCRibbonComponent.OpenTRC=function(mode,url,title){ULS1cy:;var $0=SP.Utilities.HttpUtility.urlPathEncode(SP.PageContextInfo.get_webServerRelativeUrl());$0=SP.Utilities.UrlBuilder.urlCombine($0,'_layouts/socialdataframe.aspx');var $1=new SP.Utilities.UrlBuilder($0);$1.addKeyValueQueryString('Url',url);if(SP.ScriptUtility.isNullOrEmptyString(title)){title=document.title;}$1.addKeyValueQueryString('Title',title);var $2=0;if(!mode){$2=1;}$1.addKeyValueQueryString('mode',$2.toString());var $3=SP.UI.$create_DialogOptions();$3.height=470;$3.width=600;$3.url=$1.get_url();$3.title=title;SP.UI.ModalDialog.showModalDialog($3);}
SP.UI.SocialData.TRCRibbonComponent.prototype={$1_3:null,$1_4:null,$1_5:null,get_$1_6:function(){ULS1cy:;if(!SP.ScriptUtility.isNullOrEmptyString(this.$1_5)){return this.$1_5;}var $0=null;$0=this.ListID;if(!SP.ScriptUtility.isNullOrEmptyString($0)){this.$1_5=$0.toUpperCase();}else{this.$1_5=null;}return this.$1_5;},getId:function(){ULS1cy:;return'TRCRibbonComponent';},get_$1_7:function(){ULS1cy:;return this.ResAddMessage;},get_$1_8:function(){ULS1cy:;return this.EnableSocialComment;},get_$1_9:function(){ULS1cy:;return this.EnableSocialTag;},m_enableSocialComment:false,m_enableSocialTag:false,get_$1_B:function(){ULS1cy:;return this.ResVerifyTypeMessage;},init:function(){ULS1cy:;this.$1_3=[];this.$1_4=[SP.UI.SocialData.TRCCommandNames.tagsAndNotesGroup,SP.UI.SocialData.TRCCommandNames.tagsAndNotes,SP.UI.SocialData.TRCCommandNames.iLikeIt];},getFocusedCommands:function(){ULS1cy:;return this.$1_4;},getGlobalCommands:function(){ULS1cy:;return this.$1_4;},canHandleCommand:function(commandId){ULS1cy:;if(commandId===SP.UI.SocialData.TRCCommandNames.tagsAndNotesGroup){return true;}if(commandId===SP.UI.SocialData.TRCCommandNames.tagsAndNotes){return(this.get_$1_9()||this.get_$1_8())&&this.$1_14()&&this.$1_D()===1;}if(commandId===SP.UI.SocialData.TRCCommandNames.iLikeIt){return this.get_$1_9()&&this.$1_14()&&this.$1_D()>0;}return false;},SelectedListAndItemIds:function(){ULS1cy:;var $0=SP.ListOperation.Selection.getSelectedList();if(SP.ScriptUtility.isNullOrUndefined($0)){return'';}var $1=SP.ListOperation.Selection.getSelectedItems();if(SP.ScriptUtility.isNullOrUndefined($1)){return'';}var $2='';var $3=null;var $dict1=$1;for(var $key2 in $dict1){var $4={key:$key2,value:$dict1[$key2]};$2=$2+$4.value.id+',';}if($2.length){$3=$0+'|'+$2.substring(0,$2.length-1);}return $3;},$1_D:function(){ULS1cy:;var $0=SP.ListOperation.Selection.getSelectedItems();var $1=0;var $dict1=$0;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};$1++;}return $1;},$1_E:function(){ULS1cy:;if(this.$1_A){return;}this.$1_A=1;var $0=SP.UI.Notify.addNotification(this.get_$1_B(),true);var $1=SP.Utilities.UrlBuilder.urlCombine(SP.PageContextInfo.get_webServerRelativeUrl(),'_vti_bin/socialdatainternalservice.json');Sys.Net.WebServiceProxy.invoke($1,'GetAvailableSocialItemTypeMask',false,null,Function.createDelegate(this,this.$1_F),Function.createDelegate(this,this.$1_10),$0);},$1_F:function($p0,$p1,$p2){this.$1_A=2;this.$1_13($p1);var $0=$p0;if(($0&1)){this.m_enableSocialTag=true;}if(($0&2)){this.m_enableSocialComment=true;}SP.Ribbon.PageManager.get_instance().get_commandDispatcher().executeCommand(Commands.CommandIds.ApplicationStateChanged,null);},$1_10:function($p0,$p1,$p2){this.$1_A=2;this.$1_13($p1);},addQuickTag:function(i){},$1_11:function($p0,$p1,$p2){this.$1_13($p1);},$1_12:function($p0,$p1,$p2){this.$1_13($p1);},AddQuickTagToListItem:function(i){},_OnFailedCallback:function(result,userContext,methodName){ULS1cy:;this.$1_13(userContext);document.body.style.cursor='default';},_OnSucceededCallback:function(result,userContext,methodName){ULS1cy:;this.$1_13(userContext);document.body.style.cursor='default';},$1_13:function($p0){if(!SP.ScriptUtility.isNullOrUndefined($p0)){SP.UI.Notify.removeNotification($p0);}},$1_14:function(){ULS1cy:;if(SP.ScriptUtility.isNullOrEmptyString(this.get_$1_6())){return false;}else{return true;}},handleCommand:function(commandId,properties,sequence){ULS1cy:;if(commandId===SP.UI.SocialData.TRCCommandNames.tagsAndNotes){if(!this.$1_14()||!this.$1_D()){this.$1_15((this.get_$1_9())?1:0);}else{this.$1_16((this.get_$1_9())?1:0);}return true;}else if(commandId===SP.UI.SocialData.TRCCommandNames.iLikeIt){if(!this.$1_14()||!this.$1_D()){this.addQuickTag(0);}else{this.AddQuickTagToListItem(0);}return true;}return false;},$1_15:function($p0){SP.UI.SocialData.TRCRibbonComponent.OpenTRC($p0,window.GetPageNormalizedUrl(),document.title);},$1_16:function($p0){var $0=SP.Utilities.HttpUtility.urlPathEncode(SP.PageContextInfo.get_webServerRelativeUrl());$0=SP.Utilities.UrlBuilder.urlCombine($0,'_layouts/socialdataframe.aspx');var $1=new SP.Utilities.UrlBuilder($0);var $2=this.SelectedListAndItemIds();var $3=$2.split('|');$1.addKeyValueQueryString('listid',$3[0]);$1.addKeyValueQueryString('id',$3[1]);var $4=0;if(!$p0){$4=1;}$1.addKeyValueQueryString('mode',$4.toString());var $5=SP.UI.$create_DialogOptions();$5.height=470;$5.width=600;$5.url=$1.get_url();SP.UI.ModalDialog.showModalDialog($5);},isFocusable:function(){ULS1cy:;return false;},receiveFocus:function(){ULS1cy:;return false;},yieldFocus:function(){ULS1cy:;return false;}}
SP.UI.SocialData.TermChange.registerClass('SP.UI.SocialData.TermChange');SP.UI.SocialData._SocialTagItem.registerClass('SP.UI.SocialData._SocialTagItem',Sys.UI.Control);SP.UI.SocialData.SocialTagsControl.registerClass('SP.UI.SocialData.SocialTagsControl',Sys.UI.Control);SP.UI.SocialData.TRCCommandNames.registerClass('SP.UI.SocialData.TRCCommandNames');SP.UI.SocialData.TRCRibbonComponent.registerClass('SP.UI.SocialData.TRCRibbonComponent',CUI.Page.PageComponent);SP.UI.SocialData.SocialTagsControl.$2_1='_vti_bin/socialdatainternalservice.json';SP.UI.SocialData.SocialTagsControl.$2_2='ManageTagInternal';SP.UI.SocialData.SocialTagsControl.$2_3='GetSocialTagInternal';SP.UI.SocialData.TRCCommandNames.tagsAndNotesGroup='TagsAndNotesGroup';SP.UI.SocialData.TRCCommandNames.tagsAndNotes='TagsAndNotes';SP.UI.SocialData.TRCCommandNames.tabSwitch='CommandContextChanged';SP.UI.SocialData.TRCCommandNames.tabNote='Ribbon.Note';SP.UI.SocialData.TRCCommandNames.tabSocialTag='Ribbon.SocialTag';SP.UI.SocialData.TRCCommandNames.iLikeIt='ILikeIt';SP.UI.SocialData.TRCRibbonComponent.$1_C=null;if(typeof(Sys)!="undefined"&&Sys&&Sys.Application){Sys.Application.notifyScriptLoaded();}
NotifyScriptLoadedAndExecuteWaitingJobs("sp.ui.socialribbon.js");_spApplicationPagesScriptLoaded=true;
